name: Simula√ß√£o de Sucesso - Variavel Presente

on:
  workflow_dispatch: # Permite rodar manualmente

jobs:
  build:
    runs-on: ubuntu-latest
    
    # üö® NOVIDADE: Definindo a vari√°vel de ambiente para todo o Job
    env:
      API_KEY_SECRETA: ${{ secrets.API_KEY_SECRETA }} 

    steps:
      - name: Checkout do c√≥digo
        uses: actions/checkout@v4

      - name: Verificar Vari√°vel de Ambiente
        # Este step agora VAI PASSAR porque a vari√°vel API_KEY_SECRETA
        # ser√° injetada a partir dos Secrets (se estiver configurada).
        run: |
          if [ -z "$API_KEY_SECRETA" ]; then
            echo "ERRO CR√çTICO DE CONFIGURA√á√ÉO: A vari√°vel API_KEY_SECRETA est√° vazia ou n√£o foi definida." >&2
            exit 1
          fi
          echo "‚úÖ Vari√°vel API_KEY_SECRETA carregada com sucesso!"
          # Simula uma a√ß√£o bem-sucedida
          echo "Processo de autentica√ß√£o conclu√≠do."
